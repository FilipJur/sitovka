---
// 1. Import Logo
import LogoWhite from "@/assets/logo-white.svg?react";

// 2. Import Social Icons from src/assets/icons/
import FacebookIcon from "@/assets/icons/facebook.svg?react";
import InstagramIcon from "@/assets/icons/instagram.svg?react";
import XIcon from "@/assets/icons/x.svg?react";
import LinkedInIcon from "@/assets/icons/linkedin.svg?react";
import YoutubeIcon from "@/assets/icons/youtube.svg?react";
import HashtagIcon from "@/assets/icons/hashtag.svg?react";

// 3. Fetch footer data from CMS
import { getEntry } from "astro:content";
import { Button } from "../ui/Button";
const footerEntry = await getEntry("footer", "footer");

type FooterData = {
  company: { name: string; street: string; city: string };
  legal: { ico: string; dic: string; court: string };
  bank: { accountNumber: string; swift: string; iban?: string };
  socials?: {
    facebook?: string | null;
    instagram?: string | null;
    x?: string | null;
    linkedin?: string | null;
    youtube?: string | null;
  };
};

const { company, legal, bank, socials } = (footerEntry?.data as FooterData) || {
  company: { name: "", street: "", city: "" },
  legal: { ico: "", dic: "", court: "" },
  bank: { accountNumber: "", swift: "" },
};

// Social links data array
const socialLinksData = [
  {
    key: "facebook",
    href: socials?.facebook,
    icon: FacebookIcon,
    label: "Facebook",
  },
  {
    key: "instagram",
    href: socials?.instagram,
    icon: InstagramIcon,
    label: "Instagram",
  },
  { key: "x", href: socials?.x, icon: XIcon, label: "X" },
  {
    key: "linkedin",
    href: socials?.linkedin,
    icon: LinkedInIcon,
    label: "LinkedIn",
  },
  {
    key: "youtube",
    href: socials?.youtube,
    icon: YoutubeIcon,
    label: "YouTube",
  },
].filter((link) => link.href);

// Links from JSON (Col 4)
const footerLinks = [
  { name: "Úvod", href: "#" },
  { name: "Co umíme", href: "#co-umime" },
  { name: "Reference", href: "#reference" },
];
---

<!--
  Layout: Footer Card Style
  - rounded-[60px]: As requested
  - bg-brand-dark: #2D3143
  - pt-[90px]: Top padding as requested
-->
<footer
  class="bg-brand-dark text-white rounded-[60px] overflow-visible relative"
>
  <div
    class="hidden md:block absolute left-1/2 -translate-x-1/2 -translate-y-1/2"
  >
    <Button href="#poptavka" variant="primary"> Poptávka </Button>
  </div>
  <div class="container mx-auto px-10 pt-22.5">
    <!-- ROW 1: Logo on the left -->
    <div class="flex justify-start">
      <a href="#" class="shrink-0 group" aria-label="Domů">
        <LogoWhite className="h-10 w-auto" aria-hidden="true" />
      </a>
    </div>
    +
    <!-- GAP: 28px -->
    <div class="h-7"></div>

    <!-- ROW 2: 4 Columns -->
    <div
      class="ml-4 grid grid-cols-1 md:grid-cols-[1fr_2fr_2fr_1fr] gap-8 text-sm font-book leading-relaxed"
    >
      <!-- Col 1: Address -->
      <div class="space-y-1">
        <p class="text-base font-brand-heading">{company?.name || ""}</p>
        <p>{company?.street || ""}</p>
        <p>{company?.city || ""}</p>
      </div>

      <!-- Col 2: Legal -->
      <div class="space-y-1">
        <p>IČO: {legal?.ico || ""}</p>
        <p>DIČ: {legal?.dic || ""}</p>
        <p>{legal?.court || ""}</p>
      </div>

      <!-- Col 3: Bank -->
      <div class="space-y-1">
        <p>Číslo účtu: {bank?.accountNumber || ""}</p>
        <p>SWIFT: {bank?.swift || ""}</p>
        {bank?.iban && <p>IBAN: {bank?.iban}</p>}
      </div>

      <!-- Col 4: Links (Bold Italic 16px) -->
      <nav class="flex flex-col gap-2 md:items-end">
        {
          footerLinks.map((link) => (
            <a
              href={link.href}
              class="text-base font-brand-heading text-white hover:text-brand-green transition-colors w-fit"
            >
              {link.name}
            </a>
          ))
        }
      </nav>
    </div>

    <!-- GAP: 28px -->
    <div class="h-7"></div>

    <!-- ROW 3: Social Icons -->
    <div
      class="flex max-w-[300px] mx-auto items-center justify-between flex-wrap"
    >
      {
        socialLinksData.map((link) => (
          <a
            href={link.href}
            target="_blank"
            rel="noopener noreferrer"
            aria-label={link.label}
            class="rounded-full border border-transparent hover:border-brand-green transition-all p-4"
          >
            <link.icon className="w-4 h-4" />
          </a>
        ))
      }
    </div>

    <div class="h-12"></div>

    <!-- ROW 4: Copyright | SVG | Cookies -->
    <div
      class="flex flex-col md:flex-row items-center justify-center gap-4 text-xs font-book -mb-6"
    >
      <span>© 2025 Síťovka</span>

      <!-- The small hashtag SVG requested in description -->
      <HashtagIcon className="w-20 h-25 text-brand-green" />

      <a href="/cookies" class="hover:text-brand-green transition-colors">
        Používáme cookies
      </a>
    </div>
  </div>
</footer>
