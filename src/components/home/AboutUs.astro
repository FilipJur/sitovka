---
import { getEntry } from "astro:content";
import BenefitsRow from "./BenefitsRow.astro";
import AboutBio from "./AboutBio.astro";
import HashtagIcon from "@/assets/icons/hashtag.svg?react";
import { PositionOverlay } from "@/components/ui/PositionOverlay";

interface Props {
  about?: {
    heading: string;
    col1: string;
    col2: string;
    image?: any;
  };
}

const { about } = Astro.props;

// Fetch benefits from legacy about.json (for now)
const aboutEntry = await getEntry("about", "about");
const benefits = aboutEntry?.data?.benefits || [];

// Robust defensive guard
if (!about) {
  console.warn("About section data missing or corrupted.");
  return null;
}
---

<section class="bg-white rounded-[60px] relative overflow-hidden">
  <div class="container mx-auto px-6 pb-24">
    <!-- Row 1: Benefits -->
    <BenefitsRow benefits={benefits} />

    <!-- Spacer -->
    <div class="h-24 lg:h-32"></div>

    <!-- Row 2: Bio -->
    <AboutBio bio={about} />
  </div>

  <!-- Decorative hashtag glued to bottom center -->
  <PositionOverlay bottom="-10px">
    <HashtagIcon className="w-21 h-auto text-brand-green" />
  </PositionOverlay>
</section>
