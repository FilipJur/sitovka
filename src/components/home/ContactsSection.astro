---
import Markdoc from "@markdoc/markdoc";
import ContactCard from "./ContactCard.astro";

interface Props {
  data: {
    heading: string;
    introText: string;
    team: any[];
  };
}

const { data } = Astro.props;
const introHtml = Markdoc.renderers.html(
  Markdoc.transform(Markdoc.parse(data.introText)),
);
---

<section
  id="kontakty"
  class="bg-white py-24"
  data-sb-object-id="src/content/pages/homepage.json"
>
  <div class="container mx-auto px-6">
    <div
      class="text-center mb-24 space-y-6 max-w-[980px] mx-auto reveal-text"
      data-delay="0"
    >
      <h2
        class="text-2xl font-brand-heading text-brand-dark uppercase"
        data-sb-field-path="contacts.heading"
      >
        {data.heading}
      </h2>
      <div
        class="text-lg font-book text-brand-dark leading-relaxed"
        set:html={introHtml}
        data-sb-field-path="contacts.introText"
      />
    </div>

    <div
      class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-16 lg:gap-x-[180px]"
    >
      {
        data.team
          .filter((p: any) => p.name && p.name.trim() !== "")
          .map((person: any, index: number) => (
            <div
              class="reveal-card"
              data-delay={`${index * 100}`}
              data-sb-field-path={`contacts.team.${index}`}
            >
              <ContactCard person={person} />
            </div>
          ))
      }
    </div>
  </div>
</section>
