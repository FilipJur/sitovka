---
import { Image } from "astro:assets";

interface Props {
  person: {
    name: string;
    role?: string;
    email?: string;
    phone?: string;
    avatar?: any;
  };
}

const { person } = Astro.props;
---

<div class="flex flex-col items-center text-center">
  {
    person.avatar ? (
      <Image
        src={person.avatar}
        alt={person.name}
        width={180}
        height={180}
        class="rounded-full w-45 h-45 object-cover mb-[30px] bg-brand-surface"
        data-sb-field-path=".avatar"
      />
    ) : (
      <div class="rounded-full w-45 h-45 bg-brand-surface mb-[30px]" />
    )
  }

  <h3
    class="text-lg font-brand-heading text-brand-dark mb-2 uppercase"
    data-sb-field-path=".name"
  >
    {person.name}
  </h3>

  {
    person.role && person.role.trim() !== "" && (
      <p
        class="text-sm font-book text-brand-dark mb-2"
        data-sb-field-path=".role"
      >
        {person.role}
      </p>
    )
  }

  {
    (person.email || person.phone) && (
      <div class="text-sm font-book text-brand-dark space-y-1">
        {person.email && person.email.trim() !== "" && (
          <a
            href={`mailto:${person.email}`}
            class="block hover:text-brand-green transition-colors"
            data-sb-field-path=".email"
          >
            {person.email}
          </a>
        )}
        {person.phone && person.phone.trim() !== "" && (
          <a
            href={`tel:${person.phone.replace(/\s/g, "")}`}
            class="block hover:text-brand-green transition-colors"
            data-sb-field-path=".phone"
          >
            {person.phone}
          </a>
        )}
      </div>
    )
  }
</div>
