---
import { getEntry } from "astro:content";
import Markdoc from "@markdoc/markdoc";
import ServiceCard from "./ServiceCard.astro";
import HashtagIcon from "@/assets/icons/hashtag.svg?react";
import { PositionOverlay } from "@/components/ui/PositionOverlay";

const entry = await getEntry("services", "services");
if (!entry) return null;

const { headingHighlight, headingRemainder, introText, items } = entry.data;
const introHtml = Markdoc.renderers.html(
  Markdoc.transform(Markdoc.parse(introText)),
);
---

<section class="bg-brand-surface rounded-[60px] relative overflow-hidden">
  <div class="container mx-auto px-6 py-24">
    <!-- Header Area -->
    <div class="text-center mb-16 space-y-6">
      <h2 class="text-2xl font-brand-heading">
        <span class="text-brand-green">{headingHighlight}</span>
        <span class="text-brand-dark">{headingRemainder}</span>
      </h2>
      <div
        class="text-lg font-book text-brand-dark leading-relaxed max-w-245 mx-auto"
        set:html={introHtml}
      />
    </div>

    <!-- 4-Column Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5">
      {items.map((item: any) => <ServiceCard item={item} />)}
    </div>
  </div>

  <!-- Decorative hashtag bottom center -->
  <PositionOverlay bottom="-10px">
    <HashtagIcon className="w-21 h-auto text-brand-green" />
  </PositionOverlay>
</section>
